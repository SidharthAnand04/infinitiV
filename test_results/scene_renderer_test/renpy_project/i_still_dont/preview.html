
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>‚àû-V Scene Preview: i_still_dont</title>
                <style>
                    body {
                        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                        max-width: 1200px;
                        margin: 0 auto;
                        padding: 20px;
                        background: linear-gradient(135deg, #1a1a2e, #16213e);
                        color: #ffffff;
                        line-height: 1.6;
                    }
                    .header {
                        text-align: center;
                        margin-bottom: 40px;
                        padding: 30px;
                        background: rgba(0, 102, 204, 0.1);
                        border-radius: 15px;
                        border: 1px solid rgba(102, 179, 255, 0.3);
                    }
                    .header h1 {
                        background: linear-gradient(45deg, #66b3ff, #0066cc);
                        -webkit-background-clip: text;
                        -webkit-text-fill-color: transparent;
                        font-size: 2.5em;
                        margin-bottom: 10px;
                    }
                    .scene-player {
                        background: rgba(42, 42, 42, 0.8);
                        border-radius: 15px;
                        padding: 30px;
                        margin: 30px 0;
                        border: 1px solid rgba(102, 179, 255, 0.2);
                    }
                    .scene-controls {
                        text-align: center;
                        margin-bottom: 30px;
                    }
                    .btn {
                        background: linear-gradient(45deg, #0066cc, #66b3ff);
                        color: white;
                        border: none;
                        padding: 12px 24px;
                        margin: 0 10px;
                        border-radius: 25px;
                        cursor: pointer;
                        font-size: 16px;
                        transition: transform 0.2s;
                    }
                    .btn:hover {
                        transform: translateY(-2px);
                    }
                    .scene-display {
                        min-height: 400px;
                        background: rgba(0, 0, 0, 0.8);
                        border-radius: 10px;
                        padding: 30px;
                        position: relative;
                        border: 2px solid rgba(102, 179, 255, 0.3);
                    }
                    .dialogue-box {
                        position: absolute;
                        bottom: 20px;
                        left: 20px;
                        right: 20px;
                        background: rgba(42, 42, 60, 0.95);
                        padding: 20px;
                        border-radius: 10px;
                        border: 1px solid rgba(102, 179, 255, 0.5);
                        display: none;
                    }
                    .character-name {
                        font-weight: bold;
                        font-size: 18px;
                        margin-bottom: 10px;
                        text-transform: uppercase;
                        letter-spacing: 1px;
                    }
                    .dialogue-text {
                        font-size: 16px;
                        line-height: 1.8;
                    }
                    .character-a { color: #66b3ff; }
                    .character-b { color: #ff6b6b; }
                    .detective { color: #4ecdc4; }
                    .suspect { color: #ffe66d; }
                    .action-display {
                        text-align: center;
                        font-style: italic;
                        color: #cccccc;
                        margin: 20px 0;
                        padding: 15px;
                        background: rgba(64, 64, 64, 0.5);
                        border-radius: 8px;
                        border-left: 4px solid #66b3ff;
                    }
                    .environment-display {
                        text-align: center;
                        color: #99ccff;
                        font-size: 14px;
                        margin: 15px 0;
                        padding: 12px;
                        background: rgba(25, 50, 100, 0.3);
                        border-radius: 6px;
                    }
                    .progress-bar {
                        background: rgba(102, 179, 255, 0.2);
                        height: 4px;
                        border-radius: 2px;
                        margin: 20px 0;
                    }
                    .progress-fill {
                        background: linear-gradient(90deg, #66b3ff, #0066cc);
                        height: 100%;
                        border-radius: 2px;
                        width: 0%;
                        transition: width 0.3s ease;
                    }
                    .script-container {
                        background: rgba(30, 30, 30, 0.9);
                        border-radius: 10px;
                        padding: 25px;
                        margin: 30px 0;
                        border: 1px solid rgba(102, 179, 255, 0.2);
                    }
                    .renpy-script {
                        background: rgba(16, 16, 16, 0.9);
                        padding: 20px;
                        border-radius: 8px;
                        white-space: pre-wrap;
                        font-family: 'Courier New', monospace;
                        font-size: 14px;
                        overflow-x: auto;
                        max-height: 400px;
                        overflow-y: auto;
                        border: 1px solid rgba(102, 179, 255, 0.1);
                    }
                    .toggle-btn {
                        background: rgba(102, 179, 255, 0.2);
                        color: #66b3ff;
                        border: 1px solid rgba(102, 179, 255, 0.5);
                        padding: 8px 16px;
                        border-radius: 5px;
                        cursor: pointer;
                        font-size: 14px;
                        transition: all 0.2s;
                    }
                    .toggle-btn:hover {
                        background: rgba(102, 179, 255, 0.3);
                    }
                    .stats {
                        display: grid;
                        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                        gap: 20px;
                        margin: 30px 0;
                    }
                    .stat-box {
                        background: rgba(42, 42, 60, 0.6);
                        padding: 20px;
                        border-radius: 10px;
                        text-align: center;
                        border: 1px solid rgba(102, 179, 255, 0.2);
                    }
                    .stat-number {
                        font-size: 2em;
                        font-weight: bold;
                        color: #66b3ff;
                    }
                    .audio-indicator {
                        display: inline-block;
                        width: 12px;
                        height: 12px;
                        background: #4CAF50;
                        border-radius: 50%;
                        margin-left: 10px;
                        animation: pulse 2s infinite;
                    }
                    @keyframes pulse {
                        0% { opacity: 1; }
                        50% { opacity: 0.5; }
                        100% { opacity: 1; }
                    }
                </style>
            </head>
            <body>
                <div class="header">
                    <h1>‚àû-V Scene Preview</h1>
                    <h2>i_still_dont</h2>
                    <p>AI-Powered Interactive Scene Generator</p>
                </div>
                
                <div class="scene-player">
                    <h3>Interactive Scene Player</h3>
                    <div class="scene-controls">
                        <button class="btn" onclick="startScene()">‚ñ∂ Start Scene</button>
                        <button class="btn" onclick="pauseScene()">‚è∏ Pause</button>
                        <button class="btn" onclick="resetScene()">‚èÆ Reset</button>
                        <button class="btn" onclick="nextBlock()">‚è≠ Next</button>
                    </div>
                    
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress"></div>
                    </div>
                    
                    <div class="scene-display" id="sceneDisplay">
                        <div class="dialogue-box" id="dialogueBox">
                            <div class="character-name" id="characterName"></div>
                            <div class="dialogue-text" id="dialogueText"></div>
                            <span class="audio-indicator" id="audioIndicator" style="display: none;"></span>
                        </div>
                    </div>
                </div>
                
                <div class="stats">
                    <div class="stat-box">
                        <div class="stat-number" id="dialogueCount">0</div>
                        <div>Dialogue Blocks</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number" id="characterCount">0</div>
                        <div>Characters</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number" id="actionCount">0</div>
                        <div>Actions</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number" id="audioCount">0</div>
                        <div>Audio Files</div>
                    </div>
                </div>
                
                <div class="script-container">
                    <h3>Generated Ren'Py Script</h3>
                    <button class="toggle-btn" onclick="toggleScript()">Show/Hide Script</button>
                    <div class="renpy-script" id="renpyScript" style="display: none;"># ‚àû-V Generated Scene Script
            # This script was automatically generated by Infiniti-V

            # Define transforms for character movement and positioning
            transform left_enter:
                xalign 0.3 yalign 1.0
                alpha 0.0
                ease 1.0 alpha 1.0

            transform right_enter:
                xalign 0.7 yalign 1.0
                alpha 0.0
                ease 1.0 alpha 1.0

            transform center_focus:
                xalign 0.5 yalign 1.0
                ease 0.5 zoom 1.1

            transform fade_out:
                alpha 1.0
                ease 1.0 alpha 0.0

            # Sound effects
            define audio.rain = "audio/sfx_rain.mp3"
            define audio.footsteps = "audio/sfx_footsteps.mp3"
            define audio.door = "audio/sfx_door.mp3"
            define audio.ambient = "audio/sfx_ambient.mp3"

            # Background definitions
            image bg warehouse = "images/warehouse.jpg"
            image bg dark_room = "images/dark_room.jpg"
            image bg black = "#000000"

            # Character images (placeholders)
            image character_a neutral = "images/character_a_neutral.png"
            image character_a concerned = "images/character_a_concerned.png"
            image character_b serious = "images/character_b_serious.png"
            image character_b angry = "images/character_b_angry.png"

            # Define characters
            define char_b = Character("Character B", color="#ff6b6b")
define char_a = Character("Character A", color="#66b3ff")

# Main scene
label start:

    # Scene: Unknown location
    # Scene begins in Unknown location with a neutral atmosphere.
    scene bg black
    with fade

    # Environment: Rain streaks down the grimy windows of the warehouse, reflecting the weak light from a single bare bulb hanging precariously from the ceiling. Water drips steadily from the roof, creating a rhythmic, unsettling sound.
    play sound audio.ambient loop
    play sound audio.ambient loop

    show char_a_unease at left_enter
    show char_a_unease at center_focus
    # Emotion: unease
    char_a "I still don't understand why you brought me here. This place gives me the creeps."

    show char_b_firm_determination at right_enter
    show char_b_firm_determination at center_focus
    # Emotion: firm_determination
    char_b "Don't play coy. We both know you were involved. Just tell me what happened."

    # Movement: Character A (Detective) slowly enters the warehouse, head down, scanning the room with a wary expression.  Her footsteps echo slightly on the concrete floor.
    play sound audio.footsteps
    with dissolve

    show char_a_defensive
    show char_a_defensive at center_focus
    # Emotion: defensive
    char_a "I told you, I was at home. Alone. It's not a secret."

    show char_b_disbelief
    show char_b_disbelief at center_focus
    # Emotion: disbelief
    char_b "Don't insult my intelligence. The security footage doesn't lie. You were here."

    show char_a_desperation
    show char_a_desperation at center_focus
    # Emotion: desperation
    char_a "That... that was weeks ago. It doesn't matter anymore."

    show char_b_intense_focus
    show char_b_intense_focus at center_focus
    # Emotion: intense_focus
    char_b "It does matter. Every detail. And I intend to hear them."

    # Movement: Character B (Suspect) shifts uncomfortably in his chair, avoiding eye contact. He fidgets with his hands.
    with dissolve

    # Environment: The sound of rain intensifies, accompanied by a low rumble of thunder.  A single drop of water lands on the table, creating a small ripple.
    play sound audio.ambient loop
    play sound audio.rain loop

    # Scene complete
    "Scene complete! Thank you for watching this ‚àû-V generated scene."
    return
</div>
                </div>
                
                <script>
                    // Scene data and state
                    let sceneBlocks = [{"id": "scene_start", "type": "scene", "setting": "Unknown location", "description": "Scene begins in Unknown location with a neutral atmosphere."}, {"id": "action_1", "type": "environment", "timing": {"sequence": 1, "relative_to": "scene_start", "when": "before", "delay": "immediate"}, "description": "Rain streaks down the grimy windows of the warehouse, reflecting the weak light from a single bare bulb hanging precariously from the ceiling. Water drips steadily from the roof, creating a rhythmic, unsettling sound.", "character": null, "duration": {"length": "normal", "seconds": 3}, "visual_elements": {"focus": "establishing oppressive atmosphere", "movement_type": "lighting_effect", "direction": "overhead", "intensity": "dramatic", "style": "decayed"}, "environmental_impact": {"lighting_change": "subtle", "background_elements": ["rain", "windows", "ceiling", "bulb"], "atmosphere_shift": "tension_increase", "sound_implications": ["drip_sound", "distant_thunder"]}, "emotional_purpose": "establish a sense of unease and isolation", "camera_suggestion": {"shot_type": "establishing", "angle": "high", "movement": "slow_pan"}}, {"id": "dialogue_1", "type": "dialogue", "character": "Character A", "text": "I still don't understand why you brought me here. This place gives me the creeps.", "emotion": "unease", "traits": {"gender": "female", "age_range": "young_adult", "voice_style": "cautious", "accent": "neutral", "speech_pattern": "slightly hesitant", "elevenlabs_voice_id": "mdktqLhdJWJ0z3jKsRxZ"}, "timing": {"pace": "normal", "pause_before": "brief", "pause_after": "none", "emphasis": ["here"], "volume": "quiet"}, "context": {"responds_to": "scene_opening", "triggers": "establishing character's initial reaction", "subtext": "expressing apprehension and distrust", "relationship_dynamic": "initial tension"}, "audio": "audio/Character A_dialogue_1.mp3"}, {"id": "dialogue_2", "type": "dialogue", "character": "Character B", "text": "Don't play coy. We both know you were involved. Just tell me what happened.", "emotion": "firm_determination", "traits": {"gender": "male", "age_range": "adult", "voice_style": "direct", "accent": "neutral", "speech_pattern": "confident", "elevenlabs_voice_id": "rKoQVmw1ldu30jxBdE8p"}, "timing": {"pace": "normal", "pause_before": "none", "pause_after": "brief", "emphasis": ["involved", "what happened"], "volume": "normal"}, "context": {"responds_to": "dialogue_1", "triggers": "direct accusation, escalating conflict", "subtext": "seeking information, asserting control", "relationship_dynamic": "power dynamic shift"}, "audio": "audio/Character B_dialogue_2.mp3"}, {"id": "action_2", "type": "movement", "timing": {"sequence": 2, "relative_to": "dialogue_1", "when": "during", "delay": "immediate"}, "description": "Character A (Detective) slowly enters the warehouse, head down, scanning the room with a wary expression.  Her footsteps echo slightly on the concrete floor.", "character": "Character A", "duration": {"length": "normal", "seconds": 4}, "visual_elements": {"focus": "detective's cautious approach", "movement_type": "walking", "direction": "toward", "intensity": "moderate", "style": "nervous"}, "environmental_impact": {"lighting_change": "none", "background_elements": ["shadows", "dust", "debris"], "atmosphere_shift": "none", "sound_implications": ["footsteps", "distant_rain"]}, "emotional_purpose": "reflecting apprehension and uncertainty", "camera_suggestion": {"shot_type": "medium", "angle": "eye_level", "movement": "follow"}}, {"id": "dialogue_3", "type": "dialogue", "character": "Character A", "text": "I told you, I was at home. Alone. It's not a secret.", "emotion": "defensive", "traits": {"gender": "female", "age_range": "young_adult", "voice_style": "firm", "accent": "neutral", "speech_pattern": "slightly agitated", "elevenlabs_voice_id": "mdktqLhdJWJ0z3jKsRxZ"}, "timing": {"pace": "normal", "pause_before": "brief", "pause_after": "none", "emphasis": ["told", "alone"], "volume": "normal"}, "context": {"responds_to": "dialogue_2", "triggers": "denial, escalating conflict", "subtext": "attempting to deflect suspicion", "relationship_dynamic": "increasing hostility"}, "audio": "audio/Character A_dialogue_3.mp3"}, {"id": "dialogue_4", "type": "dialogue", "character": "Character B", "text": "Don't insult my intelligence. The security footage doesn't lie. You were here.", "emotion": "disbelief", "traits": {"gender": "male", "age_range": "adult", "voice_style": "cold", "accent": "neutral", "speech_pattern": "measured", "elevenlabs_voice_id": "rKoQVmw1ldu30jxBdE8p"}, "timing": {"pace": "normal", "pause_before": "brief", "pause_after": "long", "emphasis": ["security footage", "here"], "volume": "normal"}, "context": {"responds_to": "dialogue_3", "triggers": "presenting irrefutable evidence", "subtext": "undermining character's denial, asserting dominance", "relationship_dynamic": "power imbalance reinforced"}, "audio": "audio/Character B_dialogue_4.mp3"}, {"id": "action_3", "type": "gesture", "timing": {"sequence": 3, "relative_to": "dialogue_1", "when": "during", "delay": "brief"}, "description": "Character A subtly clutches her jacket, a nervous habit.", "character": "Character A", "duration": {"length": "brief", "seconds": 1}, "visual_elements": {"focus": "nervousness", "movement_type": "gesture", "direction": "internal", "intensity": "subtle", "style": "anxious"}, "environmental_impact": {"lighting_change": "none", "background_elements": ["jacket"], "atmosphere_shift": "none", "sound_implications": "none"}, "emotional_purpose": "reinforce character's unease", "camera_suggestion": {"shot_type": "close_up", "angle": "slightly_high", "movement": "static"}}, {"id": "dialogue_5", "type": "dialogue", "character": "Character A", "text": "That... that was weeks ago. It doesn't matter anymore.", "emotion": "desperation", "traits": {"gender": "female", "age_range": "young_adult", "voice_style": "weak", "accent": "neutral", "speech_pattern": "hesitant", "elevenlabs_voice_id": "mdktqLhdJWJ0z3jKsRxZ"}, "timing": {"pace": "slow", "pause_before": "long", "pause_after": "brief", "emphasis": ["matter"], "volume": "whisper"}, "context": {"responds_to": "dialogue_4", "triggers": "attempting to minimize involvement", "subtext": "revealing a possible attempt to cover up the past", "relationship_dynamic": "vulnerability exposed"}, "audio": "audio/Character A_dialogue_5.mp3"}, {"id": "dialogue_6", "type": "dialogue", "character": "Character B", "text": "It does matter. Every detail. And I intend to hear them.", "emotion": "intense_focus", "traits": {"gender": "male", "age_range": "adult", "voice_style": "authoritative", "accent": "neutral", "speech_pattern": "firm", "elevenlabs_voice_id": "rKoQVmw1ldu30jxBdE8p"}, "timing": {"pace": "normal", "pause_before": "none", "pause_after": "none", "emphasis": ["detail", "hear"], "volume": "normal"}, "context": {"responds_to": "dialogue_5", "triggers": "determination to uncover the truth", "subtext": "threat of further interrogation, increasing pressure", "relationship_dynamic": "escalating conflict, no resolution in sight"}, "audio": "audio/Character B_dialogue_6.mp3"}, {"id": "action_4", "type": "movement", "timing": {"sequence": 4, "relative_to": "dialogue_2", "when": "during", "delay": "immediate"}, "description": "Character B (Suspect) shifts uncomfortably in his chair, avoiding eye contact. He fidgets with his hands.", "character": "Character B", "duration": {"length": "normal", "seconds": 3}, "visual_elements": {"focus": "defensive body language", "movement_type": "shifting", "direction": "multiple", "intensity": "moderate", "style": "nervous"}, "environmental_impact": {"lighting_change": "none", "background_elements": ["chair", "table"], "atmosphere_shift": "none", "sound_implications": ["fidgeting_sounds"]}, "emotional_purpose": "show nervousness and discomfort", "camera_suggestion": {"shot_type": "medium", "angle": "eye_level", "movement": "follow"}}, {"id": "action_5", "type": "visual_effect", "timing": {"sequence": 5, "relative_to": "dialogue_3", "when": "during", "delay": "brief"}, "description": "A brief, distorted flash of light momentarily illuminates the room, highlighting the grime and decay.", "character": null, "duration": {"length": "brief", "seconds": 1}, "visual_elements": {"focus": "emphasizing the unsettling environment", "movement_type": "visual_effect", "direction": "overhead", "intensity": "dramatic", "style": "distorted"}, "environmental_impact": {"lighting_change": "dramatic", "background_elements": ["shadows", "dust"], "atmosphere_shift": "tension_increase", "sound_implications": "none"}, "emotional_purpose": "amplify the sense of unease and mystery", "camera_suggestion": {"shot_type": "medium", "angle": "eye_level", "movement": "static"}}, {"id": "action_6", "type": "environment", "timing": {"sequence": 6, "relative_to": "dialogue_4", "when": "during", "delay": "extended"}, "description": "The sound of rain intensifies, accompanied by a low rumble of thunder.  A single drop of water lands on the table, creating a small ripple.", "character": null, "duration": {"length": "normal", "seconds": 4}, "visual_elements": {"focus": "heightening the atmosphere", "movement_type": "environmental_sound", "direction": "ambient", "intensity": "moderate", "style": "realistic"}, "environmental_impact": {"lighting_change": "none", "background_elements": ["rain", "table", "water_drop"], "atmosphere_shift": "tension_increase", "sound_implications": ["thunder", "rain_sound"]}, "emotional_purpose": "build suspense and create a sense of foreboding", "camera_suggestion": {"shot_type": "medium", "angle": "eye_level", "movement": "static"}}];
                    let currentBlock = 0;
                    let isPlaying = false;
                    let sceneTimer = null;
                    
                    // Initialize scene
                    document.addEventListener('DOMContentLoaded', function() {
                        updateStats();
                        if (sceneBlocks.length > 0) {
                            resetScene();
                        }
                    });
                    
                    function updateStats() {
                        const dialogues = sceneBlocks.filter(b => b.type === 'dialogue');
                        const actions = sceneBlocks.filter(b => b.type === 'action' || b.type === 'movement' || b.type === 'environment');
                        const characters = new Set(dialogues.map(d => d.character)).size;
                        const audios = dialogues.filter(d => d.audio).length;
                        
                        document.getElementById('dialogueCount').textContent = dialogues.length;
                        document.getElementById('characterCount').textContent = characters;
                        document.getElementById('actionCount').textContent = actions.length;
                        document.getElementById('audioCount').textContent = audios;
                    }
                    
                    function startScene() {
                        isPlaying = true;
                        playCurrentBlock();
                    }
                    
                    function pauseScene() {
                        isPlaying = false;
                        if (sceneTimer) {
                            clearTimeout(sceneTimer);
                            sceneTimer = null;
                        }
                    }
                    
                    function resetScene() {
                        pauseScene();
                        currentBlock = 0;
                        updateProgress();
                        hideDialogue();
                        clearDisplay();
                    }
                    
                    function nextBlock() {
                        if (currentBlock < sceneBlocks.length - 1) {
                            currentBlock++;
                            playCurrentBlock();
                        }
                    }
                    
                    function playCurrentBlock() {
                        if (currentBlock >= sceneBlocks.length) {
                            pauseScene();
                            return;
                        }
                        
                        const block = sceneBlocks[currentBlock];
                        updateProgress();
                        
                        if (block.type === 'dialogue') {
                            showDialogue(block);
                        } else if (block.type === 'action' || block.type === 'movement') {
                            showAction(block);
                        } else if (block.type === 'environment') {
                            showEnvironment(block);
                        }
                        
                        // Auto-advance if playing
                        if (isPlaying) {
                            const duration = getDuration(block);
                            sceneTimer = setTimeout(() => {
                                currentBlock++;
                                playCurrentBlock();
                            }, duration);
                        }
                    }
                    
                    function showDialogue(block) {
                        const dialogueBox = document.getElementById('dialogueBox');
                        const characterName = document.getElementById('characterName');
                        const dialogueText = document.getElementById('dialogueText');
                        const audioIndicator = document.getElementById('audioIndicator');
                        
                        characterName.textContent = block.character || 'Narrator';
                        characterName.className = 'character-name ' + getCharacterClass(block.character);
                        dialogueText.textContent = block.text || '';
                        
                        if (block.audio) {
                            audioIndicator.style.display = 'inline-block';
                        } else {
                            audioIndicator.style.display = 'none';
                        }
                        
                        dialogueBox.style.display = 'block';
                        clearDisplay();
                    }
                    
                    function showAction(block) {
                        hideDialogue();
                        const display = document.getElementById('sceneDisplay');
                        const actionDiv = document.createElement('div');
                        actionDiv.className = 'action-display';
                        actionDiv.textContent = '‚ú¶ ' + (block.description || 'Action occurs');
                        display.appendChild(actionDiv);
                    }
                    
                    function showEnvironment(block) {
                        hideDialogue();
                        const display = document.getElementById('sceneDisplay');
                        const envDiv = document.createElement('div');
                        envDiv.className = 'environment-display';
                        envDiv.textContent = 'üåÜ ' + (block.description || 'Environmental change');
                        display.appendChild(envDiv);
                    }
                    
                    function hideDialogue() {
                        document.getElementById('dialogueBox').style.display = 'none';
                    }
                    
                    function clearDisplay() {
                        const display = document.getElementById('sceneDisplay');
                        const children = display.children;
                        for (let i = children.length - 1; i >= 0; i--) {
                            const child = children[i];
                            if (child.id !== 'dialogueBox') {
                                child.remove();
                            }
                        }
                    }
                    
                    function getCharacterClass(character) {
                        if (!character) return '';
                        const lower = character.toLowerCase();
                        if (lower.includes('character a') || lower.includes('detective')) return 'character-a';
                        if (lower.includes('character b') || lower.includes('suspect')) return 'character-b';
                        if (lower.includes('detective')) return 'detective';
                        if (lower.includes('suspect')) return 'suspect';
                        return '';
                    }
                    
                    function getDuration(block) {
                        if (block.type === 'dialogue') {
                            const textLength = (block.text || '').length;
                            return Math.max(2000, textLength * 50); // 50ms per character, min 2s
                        }
                        return 2000; // 2 seconds for actions/environment
                    }
                    
                    function updateProgress() {
                        const progress = sceneBlocks.length > 0 ? (currentBlock / sceneBlocks.length) * 100 : 0;
                        document.getElementById('progress').style.width = progress + '%';
                    }
                    
                    function toggleScript() {
                        const script = document.getElementById('renpyScript');
                        script.style.display = script.style.display === 'none' ? 'block' : 'none';
                    }
                </script>
            </body>
            </html>
            